<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>c11s-a Configuration</title>
    <link rel='stylesheet' type='text/css' href='css/slate.min.css'>
    <meta content="initial-scale=1, maximum-scale=1, user-scalable=0" name="viewport">
    <script src='js/slate.min.js'></script>
  </head>

  <body>
    <div class='item-container'>
      <div class='item-container-header'>Complications</div>

      <div class='item-container-content'>
        <label class="item">
          TopLeft A
          <select id="COMPLICATIONS_TL_L" dir='rtl' class="item-select">
            <optgroup>
              <option value="0" class="item-select-option">[none]</option>
            </optgroup>
            <optgroup label="— Time —">
              <option value="1" class="item-select-option">Year</option>
              <option value="2" class="item-select-option">Month</option>
              <option value="3" class="item-select-option">Month name</option>
              <option value="4" class="item-select-option">Week</option>
              <option value="5" class="item-select-option">Year day</option>
              <option value="6" class="item-select-option">Month day</option>
              <option value="7" class="item-select-option">Suffixed day</option>
              <option value="8" class="item-select-option">Week day</option>
              <option value="9" class="item-select-option" selected>Day name</option>
              <option value="10" class="item-select-option">Hour</option>
              <option value="11" class="item-select-option">Minute</option>
              <option value="12" class="item-select-option">Second</option>
              <option value="13" class="item-select-option">AM/PM</option>
              <option value="14" class="item-select-option">DST</option>
            </optgroup>
            <optgroup label="— Bluetooth —">
              <option value="20" class="item-select-option">Bluetooth</option>
            </optgroup>
            <optgroup label="— Battery —">
              <option value="30" class="item-select-option">Charger</option>
              <option value="31" class="item-select-option">Charge level</option>
            </optgroup>
            <optgroup label="— Weather —">
              <option value="40" class="item-select-option">Temperature</option>
              <option value="41" class="item-select-option">High</option>
              <option value="42" class="item-select-option">Low</option>
              <option value="43" class="item-select-option">Humidity</option>
              <option value="44" class="item-select-option">Wind speed</option>
            </optgroup>
          </select>
        </label>
        <label class="item">
          TopLeft B
          <select id="COMPLICATIONS_TL_R" dir='rtl' class="item-select">
            <optgroup>
              <option value="0" class="item-select-option" selected>[none]</option>
            </optgroup>
            <optgroup label="— Time —">
              <option value="1" class="item-select-option">Year</option>
              <option value="2" class="item-select-option">Month</option>
              <option value="3" class="item-select-option">Month name</option>
              <option value="4" class="item-select-option">Week</option>
              <option value="5" class="item-select-option">Year day</option>
              <option value="6" class="item-select-option">Month day</option>
              <option value="7" class="item-select-option">Suffixed day</option>
              <option value="8" class="item-select-option">Week day</option>
              <option value="9" class="item-select-option">Day name</option>
              <option value="10" class="item-select-option">Hour</option>
              <option value="11" class="item-select-option">Minute</option>
              <option value="12" class="item-select-option">Second</option>
              <option value="13" class="item-select-option">AM/PM</option>
              <option value="14" class="item-select-option">DST</option>
            </optgroup>
            <optgroup label="— Bluetooth —">
              <option value="20" class="item-select-option">Bluetooth</option>
            </optgroup>
            <optgroup label="— Battery —">
              <option value="30" class="item-select-option">Charger</option>
              <option value="31" class="item-select-option">Charge level</option>
            </optgroup>
            <optgroup label="— Weather —">
              <option value="40" class="item-select-option">Temperature</option>
              <option value="41" class="item-select-option">High</option>
              <option value="42" class="item-select-option">Low</option>
              <option value="43" class="item-select-option">Humidity</option>
              <option value="44" class="item-select-option">Wind speed</option>
            </optgroup>
          </select>
        </label>
        <label class="item">
          TopRight A
          <select id="COMPLICATIONS_TR_L" dir='rtl' class="item-select">
            <optgroup>
              <option value="0" class="item-select-option" selected>[none]</option>
            </optgroup>
            <optgroup label="— Time —">
              <option value="1" class="item-select-option">Year</option>
              <option value="2" class="item-select-option">Month</option>
              <option value="3" class="item-select-option">Month name</option>
              <option value="4" class="item-select-option">Week</option>
              <option value="5" class="item-select-option">Year day</option>
              <option value="6" class="item-select-option">Month day</option>
              <option value="7" class="item-select-option">Suffixed day</option>
              <option value="8" class="item-select-option">Week day</option>
              <option value="9" class="item-select-option">Day name</option>
              <option value="10" class="item-select-option">Hour</option>
              <option value="11" class="item-select-option">Minute</option>
              <option value="12" class="item-select-option">Second</option>
              <option value="13" class="item-select-option">AM/PM</option>
              <option value="14" class="item-select-option">DST</option>
            </optgroup>
            <optgroup label="— Bluetooth —">
              <option value="20" class="item-select-option">Bluetooth</option>
            </optgroup>
            <optgroup label="— Battery —">
              <option value="30" class="item-select-option">Charger</option>
              <option value="31" class="item-select-option">Charge level</option>
            </optgroup>
            <optgroup label="— Weather —">
              <option value="40" class="item-select-option">Temperature</option>
              <option value="41" class="item-select-option">High</option>
              <option value="42" class="item-select-option">Low</option>
              <option value="43" class="item-select-option">Humidity</option>
              <option value="44" class="item-select-option">Wind speed</option>
            </optgroup>
          </select>
        </label>
        <label class="item">
          TopRight B
          <select id="COMPLICATIONS_TR_R" dir='rtl' class="item-select">
            <optgroup>
              <option value="0" class="item-select-option" selected>[none]</option>
            </optgroup>
            <optgroup label="— Time —">
              <option value="1" class="item-select-option">Year</option>
              <option value="2" class="item-select-option">Month</option>
              <option value="3" class="item-select-option">Month name</option>
              <option value="4" class="item-select-option">Week</option>
              <option value="5" class="item-select-option">Year day</option>
              <option value="6" class="item-select-option">Month day</option>
              <option value="7" class="item-select-option">Suffixed day</option>
              <option value="8" class="item-select-option">Week day</option>
              <option value="9" class="item-select-option">Day name</option>
              <option value="10" class="item-select-option">Hour</option>
              <option value="11" class="item-select-option">Minute</option>
              <option value="12" class="item-select-option">Second</option>
              <option value="13" class="item-select-option">AM/PM</option>
              <option value="14" class="item-select-option">DST</option>
            </optgroup>
            <optgroup label="— Bluetooth —">
              <option value="20" class="item-select-option">Bluetooth</option>
            </optgroup>
            <optgroup label="— Battery —">
              <option value="30" class="item-select-option">Charger</option>
              <option value="31" class="item-select-option">Charge level</option>
            </optgroup>
            <optgroup label="— Weather —">
              <option value="40" class="item-select-option">Temperature</option>
              <option value="41" class="item-select-option">High</option>
              <option value="42" class="item-select-option">Low</option>
              <option value="43" class="item-select-option">Humidity</option>
              <option value="44" class="item-select-option">Wind speed</option>
            </optgroup>
          </select>
        </label>
        <label class="item">
          BottomLeft A
          <select id="COMPLICATIONS_BL_L" dir='rtl' class="item-select">
            <optgroup>
              <option value="0" class="item-select-option" selected>[none]</option>
            </optgroup>
            <optgroup label="— Time —">
              <option value="1" class="item-select-option">Year</option>
              <option value="2" class="item-select-option">Month</option>
              <option value="3" class="item-select-option">Month name</option>
              <option value="4" class="item-select-option">Week</option>
              <option value="5" class="item-select-option">Year day</option>
              <option value="6" class="item-select-option">Month day</option>
              <option value="7" class="item-select-option">Suffixed day</option>
              <option value="8" class="item-select-option">Week day</option>
              <option value="9" class="item-select-option">Day name</option>
              <option value="10" class="item-select-option">Hour</option>
              <option value="11" class="item-select-option">Minute</option>
              <option value="12" class="item-select-option">Second</option>
              <option value="13" class="item-select-option">AM/PM</option>
              <option value="14" class="item-select-option">DST</option>
            </optgroup>
            <optgroup label="— Bluetooth —">
              <option value="20" class="item-select-option">Bluetooth</option>
            </optgroup>
            <optgroup label="— Battery —">
              <option value="30" class="item-select-option">Charger</option>
              <option value="31" class="item-select-option">Charge level</option>
            </optgroup>
            <optgroup label="— Weather —">
              <option value="40" class="item-select-option">Temperature</option>
              <option value="41" class="item-select-option">High</option>
              <option value="42" class="item-select-option">Low</option>
              <option value="43" class="item-select-option">Humidity</option>
              <option value="44" class="item-select-option">Wind speed</option>
            </optgroup>
          </select>
        </label>
        <label class="item">
          BottomLeft B
          <select id="COMPLICATIONS_BL_R" dir='rtl' class="item-select">
            <optgroup>
              <option value="0" class="item-select-option" selected>[none]</option>
            </optgroup>
            <optgroup label="— Time —">
              <option value="1" class="item-select-option">Year</option>
              <option value="2" class="item-select-option">Month</option>
              <option value="3" class="item-select-option">Month name</option>
              <option value="4" class="item-select-option">Week</option>
              <option value="5" class="item-select-option">Year day</option>
              <option value="6" class="item-select-option">Month day</option>
              <option value="7" class="item-select-option">Suffixed day</option>
              <option value="8" class="item-select-option">Week day</option>
              <option value="9" class="item-select-option">Day name</option>
              <option value="10" class="item-select-option">Hour</option>
              <option value="11" class="item-select-option">Minute</option>
              <option value="12" class="item-select-option">Second</option>
              <option value="13" class="item-select-option">AM/PM</option>
              <option value="14" class="item-select-option">DST</option>
            </optgroup>
            <optgroup label="— Bluetooth —">
              <option value="20" class="item-select-option">Bluetooth</option>
            </optgroup>
            <optgroup label="— Battery —">
              <option value="30" class="item-select-option">Charger</option>
              <option value="31" class="item-select-option">Charge level</option>
            </optgroup>
            <optgroup label="— Weather —">
              <option value="40" class="item-select-option">Temperature</option>
              <option value="41" class="item-select-option">High</option>
              <option value="42" class="item-select-option">Low</option>
              <option value="43" class="item-select-option">Humidity</option>
              <option value="44" class="item-select-option">Wind speed</option>
            </optgroup>
          </select>
        </label>
        <label class="item">
          BottomRight A
          <select id="COMPLICATIONS_BR_L" dir='rtl' class="item-select">
            <optgroup>
              <option value="0" class="item-select-option" selected>[none]</option>
            </optgroup>
            <optgroup label="— Time —">
              <option value="1" class="item-select-option">Year</option>
              <option value="2" class="item-select-option">Month</option>
              <option value="3" class="item-select-option">Month name</option>
              <option value="4" class="item-select-option">Week</option>
              <option value="5" class="item-select-option">Year day</option>
              <option value="6" class="item-select-option">Month day</option>
              <option value="7" class="item-select-option">Suffixed day</option>
              <option value="8" class="item-select-option">Week day</option>
              <option value="9" class="item-select-option">Day name</option>
              <option value="10" class="item-select-option">Hour</option>
              <option value="11" class="item-select-option">Minute</option>
              <option value="12" class="item-select-option">Second</option>
              <option value="13" class="item-select-option">AM/PM</option>
              <option value="14" class="item-select-option">DST</option>
            </optgroup>
            <optgroup label="— Bluetooth —">
              <option value="20" class="item-select-option">Bluetooth</option>
            </optgroup>
            <optgroup label="— Battery —">
              <option value="30" class="item-select-option">Charger</option>
              <option value="31" class="item-select-option">Charge level</option>
            </optgroup>
            <optgroup label="— Weather —">
              <option value="40" class="item-select-option">Temperature</option>
              <option value="41" class="item-select-option">High</option>
              <option value="42" class="item-select-option">Low</option>
              <option value="43" class="item-select-option">Humidity</option>
              <option value="44" class="item-select-option">Wind speed</option>
            </optgroup>
          </select>
        </label>
        <label class="item">
          BottomRight B
          <select id="COMPLICATIONS_BR_R" dir='rtl' class="item-select">
            <optgroup>
              <option value="0" class="item-select-option" selected>[none]</option>
            </optgroup>
            <optgroup label="— Time —">
              <option value="1" class="item-select-option">Year</option>
              <option value="2" class="item-select-option">Month</option>
              <option value="3" class="item-select-option">Month name</option>
              <option value="4" class="item-select-option">Week</option>
              <option value="5" class="item-select-option">Year day</option>
              <option value="6" class="item-select-option">Month day</option>
              <option value="7" class="item-select-option">Suffixed day</option>
              <option value="8" class="item-select-option">Week day</option>
              <option value="9" class="item-select-option">Day name</option>
              <option value="10" class="item-select-option">Hour</option>
              <option value="11" class="item-select-option">Minute</option>
              <option value="12" class="item-select-option">Second</option>
              <option value="13" class="item-select-option">AM/PM</option>
              <option value="14" class="item-select-option">DST</option>
            </optgroup>
            <optgroup label="— Bluetooth —">
              <option value="20" class="item-select-option">Bluetooth</option>
            </optgroup>
            <optgroup label="— Battery —">
              <option value="30" class="item-select-option">Charger</option>
              <option value="31" class="item-select-option">Charge level</option>
            </optgroup>
            <optgroup label="— Weather —">
              <option value="40" class="item-select-option">Temperature</option>
              <option value="41" class="item-select-option">High</option>
              <option value="42" class="item-select-option">Low</option>
              <option value="43" class="item-select-option">Humidity</option>
              <option value="44" class="item-select-option">Wind speed</option>
            </optgroup>
          </select>
        </label>
      </div>

      <div class='item-container-footer'>
      </div>
    </div>

    <div class='item-container'>
      <div class='item-container-header'>Settings</div>

      <div class='item-container-content'>
        <label class="item">
          Hide Seconds
          <input type="checkbox" class="item-toggle" id="HIDE_SECONDS">
        </label>
        <label class="item">
          Disable Weather
          <input type="checkbox" class="item-toggle" id="DISABLE_WEATHER">
        </label>
        <div id="TEMPERATURE_UNIT" class="item tab-buttons">
          <a name="tab-1" value="0" class="tab-button active">Celcius</a>
          <a name="tab-1" value="1" class="tab-button">Fahrenheit</a>
        </div>
      </div>

      <div class='item-container-footer'></div>
    </div>

    <div class='item-container'>
      <div class='button-container'>
        <input id='submit_button' type='button' class='item-button' value='SUBMIT'>
      </div>
    </div>

    <script>
      function getConfigData() {
        var options = {
          'COMPLICATIONS_TL_L': $("#COMPLICATIONS_TL_L").val() * 1,
          'COMPLICATIONS_TL_R': $("#COMPLICATIONS_TL_R").val() * 1,
          'COMPLICATIONS_TR_L': $("#COMPLICATIONS_TR_L").val() * 1,
          'COMPLICATIONS_TR_R': $("#COMPLICATIONS_TR_R").val() * 1,
          'COMPLICATIONS_BL_L': $("#COMPLICATIONS_BL_L").val() * 1,
          'COMPLICATIONS_BL_R': $("#COMPLICATIONS_BL_R").val() * 1,
          'COMPLICATIONS_BR_L': $("#COMPLICATIONS_BR_L").val() * 1,
          'COMPLICATIONS_BR_R': $("#COMPLICATIONS_BR_R").val() * 1,

          'HIDE_SECONDS': $("#HIDE_SECONDS").prop('checked') * 1,
          'DISABLE_WEATHER': $("#DISABLE_WEATHER").prop('checked') * 1,
          'TEMPERATURE_UNIT': $('#TEMPERATURE_UNIT').find('.active').attr('value') * 1
        };

        // Save for next launch
        localStorage['COMPLICATIONS_TL_L'] = options['COMPLICATIONS_TL_L'];
        localStorage['COMPLICATIONS_TL_R'] = options['COMPLICATIONS_TL_R'];
        localStorage['COMPLICATIONS_TR_L'] = options['COMPLICATIONS_TR_L'];
        localStorage['COMPLICATIONS_TR_R'] = options['COMPLICATIONS_TR_R'];
        localStorage['COMPLICATIONS_BL_L'] = options['COMPLICATIONS_BL_L'];
        localStorage['COMPLICATIONS_BL_R'] = options['COMPLICATIONS_BL_R'];
        localStorage['COMPLICATIONS_BR_L'] = options['COMPLICATIONS_BR_L'];
        localStorage['COMPLICATIONS_BR_R'] = options['COMPLICATIONS_BR_R'];

        localStorage['HIDE_SECONDS'] = options['HIDE_SECONDS'];
        localStorage['DISABLE_WEATHER'] = options['DISABLE_WEATHER'];
        localStorage['TEMPERATURE_UNIT'] = options['TEMPERATURE_UNIT'];

        console.log('Got options: ' + JSON.stringify(options));
        return options;
      }

      function getQueryParam(variable, defaultValue) {
        var query = location.search.substring(1);
        var vars = query.split('&');
        for (var i = 0; i < vars.length; i++) {
          var pair = vars[i].split('=');
          if (pair[0] === variable) {
            return decodeURIComponent(pair[1]);
          }
        }
        return defaultValue || false;
      }

      (function() {
        $("#submit_button").on('click', function() {
          console.log('Submit');

          // Set the return URL depending on the runtime environment
          var return_to = getQueryParam('return_to', 'pebblejs://close#');
          document.location = return_to + encodeURIComponent(JSON.stringify(getConfigData()));
        });

        // Load any previously saved configuration, if available
        $("#COMPLICATIONS_TL_L").val(localStorage['COMPLICATIONS_TL_L'] || 9);
        $("#COMPLICATIONS_TL_R").val(localStorage['COMPLICATIONS_TL_R'] || 7);
        $("#COMPLICATIONS_TR_L").val(localStorage['COMPLICATIONS_TR_L'] || 2);
        $("#COMPLICATIONS_TR_R").val(localStorage['COMPLICATIONS_TR_R'] || 3);
        $("#COMPLICATIONS_BL_L").val(localStorage['COMPLICATIONS_BL_L'] || 40);
        $("#COMPLICATIONS_BL_R").val(localStorage['COMPLICATIONS_BL_R'] || 43);
        $("#COMPLICATIONS_BR_L").val(localStorage['COMPLICATIONS_BR_L'] || 42);
        $("#COMPLICATIONS_BR_R").val(localStorage['COMPLICATIONS_BR_R'] || 41);

        $("#HIDE_SECONDS").prop("checked", localStorage['HIDE_SECONDS'] * 1);
        $("#DISABLE_WEATHER").prop("checked", localStorage['DISABLE_WEATHER'] * 1);
        $("#TEMPERATURE_UNIT a").removeClass("active");
        $('#TEMPERATURE_UNIT a[value="' + (localStorage['TEMPERATURE_UNIT'] || 0 * 1) + '"]').addClass("active");
      })();
    </script>
  </body>
</html>
