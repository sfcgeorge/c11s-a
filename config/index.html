<!DOCTYPE html>
<html>
  <head>
    <title>Slate Example Configuration</title>
    <link rel='stylesheet' type='text/css' href='css/slate.min.css'>
    <script src='js/slate.min.js'></script>
  </head>

  <body>
    <div class='item-container'>
      <div class='item-container-header'>Complications</div>
      <div class='item-container-content'>
        <label class="item">
          Example Item
          <select id="COMPLICATIONS_TL_L" dir='rtl' class="item-select">
            <option value="0" class="item-select-option" selected>[none]</option>
            <option value="1" class="item-select-option">Year</option>
          </select>
        </label>
      </div>
      <div class='item-container-footer'>
        Choose which data to display in each complication.
      </div>
    </div>

    <div class='item-container'>
      <div class='button-container'>
        <input id='submit_button' type='button' class='item-button' value='SUBMIT'>
      </div>
    </div>

    <script>
      function getConfigData() {
        var options = {
          'COMPLICATIONS_TL_L': $("#COMPLICATIONS_TL_L").val() * 1
        };

        // Save for next launch
        localStorage['COMPLICATIONS_TL_L'] = options['COMPLICATIONS_TL_L'];

        console.log('Got options: ' + JSON.stringify(options));
        return options;
      }

      function getQueryParam(variable, defaultValue) {
        var query = location.search.substring(1);
        var vars = query.split('&');
        for (var i = 0; i < vars.length; i++) {
          var pair = vars[i].split('=');
          if (pair[0] === variable) {
            return decodeURIComponent(pair[1]);
          }
        }
        return defaultValue || false;
      }

      (function() {
        $("#submit_button").on('click', function() {
          console.log('Submit');

          // Set the return URL depending on the runtime environment
          var return_to = getQueryParam('return_to', 'pebblejs://close#');
          document.location = return_to + encodeURIComponent(JSON.stringify(getConfigData()));
        });

        // Load any previously saved configuration, if available
        //if(localStorage['high_contrast']) {
          $("#COMPLICATIONS_TL_L").val(localStorage['COMPLICATIONS_TL_L']);
        //}
      })();
    </script>
  </body>
</html>
